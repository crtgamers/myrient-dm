/**
 * Reset, base y layout del shell.
 * Orden: tras tokens, antes de components.
 */
/* ========================================
   PREFERS-REDUCED-MOTION (solo movimiento; blur/glass lo controla Modo rendimiento)
   Respetado cuando el usuario no ha forzado "animaciones completas" en configuraci√≥n.
   ======================================== */
@media (prefers-reduced-motion: reduce) {
  body:not(.force-full-motion) *,
  body:not(.force-full-motion) *::before,
  body:not(.force-full-motion) *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Reducir animaciones cuando el usuario lo elige (solo movimiento; blur/glass lo controla Modo rendimiento) */
body.reduced-motion *,
body.reduced-motion *::before,
body.reduced-motion *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
}

/* Utils: Glassmorphism */
.glass-effect {
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur) var(--glass-saturate);
  -webkit-backdrop-filter: var(--glass-blur) var(--glass-saturate);
  border: 1px solid var(--glass-border);
}

/* Modo Rendimiento (Fase 10.1 = "Reducir efectos visuales"): desactiva blur/glass y simplifica sombras */
body.performance-mode .glass-effect,
body.performance-mode .sidebar,
body.performance-mode .queue-state-filter,
body.performance-mode .modern-select,
body.performance-mode .settings-select {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  background: var(--bg-secondary) !important;
}
body.performance-mode .search-loading-overlay,
body.performance-mode .filters-overlay,
body.performance-mode .logs-overlay,
body.performance-mode .downloads-panel {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}
body.performance-mode .search-loading-overlay {
  background: var(--overlay-bg) !important;
  opacity: 0.92;
}
body.performance-mode .filters-overlay {
  background: var(--overlay-bg) !important;
}

/* Simplificar sombras en modo rendimiento (menos repaint/GPU) */
body.performance-mode .floating-downloads-btn {
  box-shadow: var(--shadow-md);
}
body.performance-mode .floating-downloads-btn:hover {
  box-shadow: var(--shadow-lg);
}
body.performance-mode .downloads-panel,
body.performance-mode .settings-panel,
body.performance-mode .logs-panel {
  box-shadow: var(--shadow-lg);
}
body.performance-mode .search-input-group:focus-within {
  box-shadow:
    0 0 0 3px var(--primary-color-alpha),
    var(--shadow-md);
}

html {
  font-size: var(--text-md);
}

body,
html,
#app {
  margin: 0;
  padding: 0;
  height: 100vh;
  height: 100dvh;
  width: 100vw;
  width: 100dvw;
  overflow: hidden;
  background-color: var(--bg-main);
  background-image:
    radial-gradient(circle at 0% 0%, rgba(16, 185, 129, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 100% 100%, rgba(16, 185, 129, 0.05) 0%, transparent 50%);
  color: var(--text-primary);
}

#container {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding: 0;
  box-sizing: border-box;
  background-color: var(--bg-main);
  color: var(--text-primary);
  transition:
    background-color var(--transition-normal),
    color var(--transition-normal);
}

.app-content-wrapper {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  overflow: hidden;
  box-sizing: border-box;
}

.main-layout {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.content-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-width: 0;
  contain: layout;
}

a {
  color: var(--primary-color);
  text-decoration: none;
  transition: color var(--transition-fast);
}

a:hover {
  color: var(--primary-color-hover);
}
